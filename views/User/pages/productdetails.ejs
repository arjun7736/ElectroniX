<%- include('../layout/header') %>
<%- include('../layout/navbar') %>

    <div class="container px-4 sm:px-6 lg:px-8 py-4 grid grid-cols-1 sm:grid-cols-2 gap-6">

        <div id="main" class="overflow-hidden">
            <img src="data:image/jpg;base64, <%= produtDetail.images[0].data.toString('base64') %>" alt="product" class="w-full hover:scale-150">
           
            <div class="grid grid-cols-5 gap-4 mt-4 img" id="img">
                <% produtDetail.images.forEach((value, index) => { %>
                    <img src="data:image/jpg;base64, <%= value.data.toString('base64') %>" alt="product2" class="w-full cursor-pointer border img" onclick="changeMainImage(this, '<%= index %>')">
                <% }) %>
            </div>
        </div>
    
        <div class="sm:pl-4">
            <h2 class="text-3xl font-medium uppercase mb-2"><%=produtDetail.brandname%> <%=produtDetail.varientname%></h2>
            <div class="flex items-center">
                <div class="flex gap-1 text-sm text-yellow-400">
                    <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                      </svg>
                    </span>
                    <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                      </svg></span>
                    <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                      </svg></span>
                    <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                      </svg></span>
                    <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                        <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                      </svg></span>
                </div>
                <div class="text-xs text-gray-500 ml-3">(150)</div>
            </div>
             
            
            <div class="space-y-2">
                <p class="text-gray-800 font-semibold space-x-2">
                    <span>Availability: </span>
                    <span class="text-green-600">In Stock</span>
                </p>
                <p class="space-x-2">
                    <span class="text-gray-800 font-semibold">Brand: </span>
                    <span class="text-gray-600"><%=produtDetail.brandname%></span>
                </p>
                <p class="space-x-2">
                    <span class="text-gray-800 font-semibold">Category: </span>
                    <span class="text-gray-600"><%=produtDetail.category%> - <%=produtDetail.subcategory%> </span>
                </p>
            </div>





            <!-- Responsive Quantity Counter -->
            <div class="sm:flex items-baseline mb-1 space-x-2 font-roboto mt-4">
                <p class="text-xl text-primary font-semibold">&#8377; <%=produtDetail.price%></p><br>
    
                <div class="flex flex-row h-10 w-28 rounded-lg relative bg-transparent mt-1">


                    <form class="max-w-xs mx-auto">
                        <label for="counter-input" class="block mb-1 text-sm font-medium  text-gray-900 dark:text-black "><br>Choose quantity:</label>
                        <div class="relative flex items-center">
                            <button type="button"  onclick="decreaseQuantity('<%=produtDetail._id%>')" id="decrement-button" data-input-counter-decrement="counter-input" class="flex-shrink-0 bg-gray-100 dark:bg-gray-700 dark:border-gray-600 border border-gray-300 rounded-md h-5 w-5 focus:outline-none">
                                <svg class="w-2.5 h-2.5 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 2">
                                    <path stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h16"/>
                                </svg>
                            </button>
                            <input type="text" id="quantity_<%=produtDetail._id%>"  data-input-counter class="flex-shrink-0 text-gray-900 dark:text-black border-0 bg-transparent text-sm font-normal focus:outline-none focus:ring-0 max-w-[2.5rem] text-center" placeholder="" value="1" required>
                            <button  onclick="increaseQuantity('<%=produtDetail._id%>')" type="button" id="increment-button" data-input-counter-increment="counter-input" class="flex-shrink-0  bg-gray-700 dark:bg-gray-700 dark:border-gray-600 border border-gray-300 rounded-md h-5 w-5 focus:outline-none opacity-50">
                                <svg class="w-2.5 h-2.5 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
                                    <path stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 1v16M1 9h16"/>
                                </svg>
                            </button>
                        </div>
                        
            
                    
                </div>
              </div>
            

            <div class="mt-10 flex gap-3 border-b border-gray-200 pb-5   pt-5">
                <a onclick="addToCart('<%=produtDetail._id%>')" class="border border-gray-300 text-black px-8 py-2 hover:bg-blue-500 hover:text-white shadow-lg font-medium rounded uppercase flex items-center gap-2 hover:text-primary transition">
                    <i class="fa-solid fa-bag-shopping"></i> Add to cart
                </a>
                <a onclick="addToWishlist('<%=produtDetail._id%>')" class="border border-gray-300 text-black px-8 py-2 hover:bg-blue-500 hover:text-white shadow-lg font-medium rounded uppercase flex items-center gap-2 hover:text-primary transition">
                    <i class="fa-solid fa-heart"></i> Wishlist
                </a>
            </div>

            <div class="container pt-5 px-4 sm:px-6 lg:px-8 pb-16">

                <h3 class="border-b  font-roboto text-black pb-3 font-medium">Product details</h3>
                <div class="w-3/5 pt-6">
                    <div class="text-black">
                        <p><%=produtDetail.description%></p>
                    </div>
                </div>
            </div>



          </div>
        </div>
        </form>
        </div>
    </div>
    
    <div class="container mt-20 pb-16 px-4 sm:px-6 lg:px-8">

        <h2 class="text-2xl font-medium text-gray-800 uppercase mb-6">Related products</h2>
        <div class="ml-20 grid grid-cols-4 gap-8">


            <%relatedProducts.forEach((value)=>{%> 
            <div class="bg-white  shadow rounded overflow-hidden group">
                <div class="relative">
                    <img src="data:image/jpg;base64, <%= value.images[0].data.toString('base64') %>" alt="product 1" class="w-full">
                    <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center 
                    justify-center gap-2 opacity-0 group-hover:opacity-100 transition">
                        <a href="   " class="text-white text-lg w-9 h-8 rounded-full bg-primary flex items-center justify-center hover:bg-gray-800 transition" title="add to wishlist">
                            <i class="fa-solid fa-heart"></i>
                        </a>
                    </div>
                </div>
                <div class="pt-4 pb-3 px-4">
                    <a href="  ">
                        <h4 class="uppercase font-medium text-xl mb-2 text-gray-800 hover:text-primary transition"><%=value.brandname%> <%=value.varientname%></h4>
                    </a>
                    <div class="flex items-baseline mb-1 space-x-2">
                        <p class="text-xl text-primary font-semibold">&#8377; <%=value.price%></p>
                    </div>
                    <div class="flex items-center">
                        <div class="flex gap-1 text-sm text-yellow-400">
                            <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                                <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                              </svg>
                            </span>
                            <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                                <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                              </svg></span>
                            <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                                <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                              </svg></span>
                            <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                                <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                              </svg></span>
                            <span><svg class="w-[10px] h-[20px] fill-[#f4b406]" viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
                                <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path>                                  
                              </svg></span>

                        </div>
                        <div class="text-xs text-gray-500 ml-3">(150)</div>
                    </div>
                </div>
                <a href="#" class="block w-full py-1 text-center text-black bg-red-500 border border-primary rounded-b hover:bg-transparent hover:text-primary transition">Add
                    to cart</a>
            </div>
            <%})%>
    </div>
    

    <%- include('../layout/footer') %>



<script>
        function decreaseQuantity(productId) {
            const inputElement = document.getElementById(`quantity_${productId}`);
            const currentValue = Number(inputElement.value);
            if (currentValue > 1) {
              inputElement.value = currentValue - 1;
              document.getElementById(`decrement-button`).disabled = false;
            }
          }

          function increaseQuantity(productId) {
  const inputElement = document.getElementById(`quantity_${productId}`);
  inputElement.value = Number(inputElement.value) + 1;
}

        </script>
        